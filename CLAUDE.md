# skillet
A skill registry toolkit for AI agents. Equal parts CLI and MCP server.
Repo name is `grimoire`, crate/binary name is `skillet`.
## Concept
Skillet is the tool, registries are distributed. Like git, not like GitHub.
Anyone can create a skill registry (a git repo with a flat directory
structure), and skillet serves it over MCP or manages it via CLI.
The Agent Skills specification (Dec 2025) standardized the skill format
across Claude Code, Cursor, Copilot, Gemini CLI, and others. Distribution
is the unsolved problem. Skillet fills that gap: create a registry, publish
skills to it, serve it to agents over MCP.
### Distribution model
Registries are just git repos. There is no central registry. A solo
developer can maintain a personal registry. An open-source community can
curate a shared one. An enterprise can run a private one. Skillet
aggregates them all the same way — `--registry` and `--remote` are both
`Vec`, and the index merges them with first-match-wins semantics.
This is the core architectural decision: skillet never owns your skills.
It reads from registries you point it at. You can fork a public registry,
vendor skills into a monorepo, or maintain a single-skill repo — skillet
doesn't care. The skill format is the contract, git is the transport.
### Shared MCP server
A development team can run a single skillet MCP server (locally or via
`--http`) pointed at their team registry. Every agent on the team
connects to the same server and gets the same skills at the same
versions. No drift, no "works on my machine" skill mismatches. Update
the registry, the server picks it up on its next refresh interval,
and every agent sees the change. This is the team-scale deployment
model — one server, one registry, consistent behavior across all agents.
## Architecture
```
src/
  main.rs        # CLI (clap), MCP server setup, serve/validate/pack/publish/init-registry
  lib.rs         # Library crate extraction
  state.rs       # AppState, SkillIndex, SkillEntry, SkillVersion, SkillMetadata
  index.rs       # Directory walking, skill.toml/SKILL.md parsing, config loading
  search.rs      # SkillSearch: BM25 full-text search over skill metadata
  bm25.rs        # Vendored BM25 engine (from jpx-engine)
  git.rs         # Git operations: clone, pull, head
  integrity.rs   # SHA256 content hashing, MANIFEST.sha256 verification
  validate.rs    # Skillpack validation
  pack.rs        # Pack: validate + generate manifest + update versions.toml
  publish.rs     # Publish: pack + open PR via gh CLI
  scaffold.rs    # init-skill scaffolding
  registry.rs    # Multi-registry loading and merging
  config.rs      # Skill installation config and paths
  manifest.rs    # Installation manifest tracking
  install.rs     # Skill installation to agent config directories
  cache.rs       # Persistent disk cache for SkillIndex
  error.rs       # Consolidated error types
  tools/         # MCP tools: search_skills, list_categories, list_skills_by_owner, install_skill
  resources/     # MCP resources: skill_content, skill_metadata, skill_files
```
### Key types
- `AppState` holds `RwLock<SkillIndex>`, `RwLock<SkillSearch>`, registry paths, config
- `SkillIndex` maps `(owner, name)` to `SkillEntry` with `merge()` for multi-registry
- `SkillSearch` wraps BM25 index, rebuilt on refresh
- Multi-registry: `--registry` and `--remote` are both `Vec`, first match wins on merge
### MCP interface
Tools: `search_skills`, `list_categories`, `list_skills_by_owner`, `install_skill`
Resources: `skillet://skills/`, `skillet://metadata/`, `skillet://files/`
### Transport
- stdio (default): standard MCP transport for agent integration
- HTTP (`--http <addr>`): tower-mcp HTTP transport, useful for testing and shared team servers
## Skill format
```
owner/skill-name/
  skill.toml       # Registry metadata (required)
  SKILL.md         # Agent Skills spec-compatible prompt (required)
  scripts/         # Optional executable scripts
  references/      # Optional reference docs
  assets/          # Optional templates, configs
  versions.toml    # Version history (generated by pack)
  MANIFEST.sha256  # Content hashes (generated by pack)
```
## CLI subcommands
- `skillet [serve]` -- run MCP server (default)
- `skillet validate <path>` -- validate a skillpack
- `skillet pack <path>` -- validate + generate manifest + update versions
- `skillet publish <path> --repo <owner/repo>` -- pack + open PR
- `skillet init-skill <path>` -- scaffold a new skill
- `skillet init-registry <path>` -- scaffold a new registry git repo
- `skillet search` -- search skills from CLI
- `skillet info` -- show skill details from CLI
- `skillet install` -- install a skill to agent config directory
- `skillet list` -- list installed skills
## Design principles
- **Tool-first**: skillet is the tool, registries are data
- **Distributed by default**: no central registry, any git repo is a valid registry
- **Owner/name namespacing**: `owner/skill-name` directories
- **Separate metadata from prompt**: skill.toml (indexing) + SKILL.md (prompt)
- **Multi-registry**: aggregate multiple local and remote registries
- **Git-backed**: registries are git repos, auditable by default
- **Team-friendly**: shared MCP server means shared skills at consistent versions
## Status
Working prototype. Multi-registry support, BM25 search, content hashing,
validate/pack/publish pipeline, HTTP transport, skill installation,
persistent disk cache, CI/CD and release pipeline.
## Open questions
- Skill parameters/template variables
- Multi-agent install targets (.cursor/skills/, .copilot/skills/, etc.)
- Registry federation (registries referencing other registries)
